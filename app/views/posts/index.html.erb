<div class="row ">
<div class="col-md-8">
<div id="custom-search-input">
  <div class="input-group col-md-12">
    <input type="text" class="form-control input-lg searchval" placeholder="Search" />
    <span class="input-group-btn">
      <button class="btn btn-info btn-lg" type="button" id="search">
        <i class="glyphicon glyphicon-search"></i>
      </button>
    </span>
  </div>
</div>
</div>
<div class="col-md-4">
<select id="target">
  <option value="letest">Latest</option>
  <option value="popular">Popular</option>
</select> 
</div>
</div>
<br>
<div class="allData">
<%= render partial: 'posts/all_data', :locals => { :post => @posts }%>
</div>
<script>
$( "#target" ).change(function(e) {
  // alert($(this).val() );
  $("#ajax_loader").show();
  $.ajax({
    type: 'GET',
    url: '/all_data',
    data: {
      key :$(this).val(),
    },
    success: function(data) {
      // console.log(data.msg)
      // $("#ajax_loader").hide();
    },
  });
});

$('#search').click(function(){
  if ($('.searchval').val() != ''){
  $("#ajax_loader").show();
  $.ajax({
    type: 'GET',
    url: '/search',
    data: {
      key :$('.searchval').val(),
    },
    success: function(data) {
      // console.log(data.msg)
      // $("#ajax_loader").hide();
    },
  });
  }else{
    alert('Type in search box');
  }

})

</script>